<!DOCTYPE html>
<!--
* CoreUI - Free Bootstrap Admin Template
* @version v2.0.0
* @link https://coreui.io
* Copyright (c) 2018 creativeLabs Łukasz Holeczek
* Licensed under MIT (https://coreui.io/license)
-->

<html lang="en">

<head>
    <base href="./">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <meta name="description" content="Satellite">
    <meta name="author" content="Satellite team">
    <meta name="keyword" content="gdpr, europe, regulation, law, compliance">
    <title>Satellite GDPR Compliance Tool</title>
    <!-- Icons-->
    <link href="../stylesheets/coreui-icons.min.css" rel="stylesheet">
    <!-- <link href="../stylesheets/flag-icon.min.css" rel="stylesheet"> -->
    <link href="../stylesheets/font-awesome.min.css" rel="stylesheet">
    <link href="../stylesheets/simple-line-icons.css" rel="stylesheet">
    <!-- Main styles for this application-->
    <link href="../stylesheets/style.css" rel="stylesheet">
    <!-- <link href="vendors/pace-progress/css/pace.min.css" rel="stylesheet"> -->
    <link rel="apple-touch-icon" sizes="180x180" href="../img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../img/favicon/favicon-16x16.png">
    <link rel="manifest" href="../img/favicon/site.webmanifest">
    <link rel="mask-icon" href="../img/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="../img/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="img/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <style>
        .badge {
  -webkit-touch-callout: none; /* iOS Safari */
    -webkit-user-select: none; /* Safari */
     -khtml-user-select: none; /* Konqueror HTML */
       -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently
                                  supported by Chrome and Opera */
}
.ccenter{
    text-align: center;
}
        </style>
</head>

<body class="app header-fixed sidebar-fixed aside-menu-fixed sidebar-lg-show">
    <header class="app-header navbar">
        <button class="navbar-toggler sidebar-toggler d-lg-none mr-auto" type="button" data-toggle="sidebar-show">
            <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand" href="#">
            <img class="navbar-brand-full" src="../img/brand/logo.svg" width="89" height="25" alt="CoreUI Logo">

        </a>

        <ul class="nav navbar-nav d-md-down-none">
            <div>Bob</div>

            <li class="nav-item px-3">
                <div class="avatar">
                    <img class="img-avatar" src="../img/avatars/3.jpg" alt="admin@bootstrapmaster.com">
                    <span class="avatar-status badge-success"></span>
                </div>
            </li>
        </ul>

    </header>
    <div class="app-body">
        <div class="sidebar">
            <nav class="sidebar-nav">
                <ul class="nav">
                    <li class="nav-title"></li>
                    <li class="nav-item" style='text-align: center;'>
                        <a href="../dpo/index.html"><span class="badge badge-info">App as a DPO</span></a>&nbsp;
                        <a href="../user/index.html"><span class="badge badge-warning">App as a user</span></a>
                    </li>
                    <li class="nav-title"></li>
                    <li class="nav-title">User</li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">
                            <i class="nav-icon icon-speedometer"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="notifications.html">
                            <i class="nav-icon icon-bell"></i> Notifications</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="info.html">
                            <i class="nav-icon icon-user"></i> My Info</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="permissions.html">
                            <i class="nav-icon icon-people"></i> My Permissions</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="requests.html">
                            <i class="nav-icon icon-user-follow"></i> My Requests</a>
                    </li>
                    <li class="nav-item mt-auto">
                        <a class="nav-link nav-link-danger" href="https://eos.io" target="_top">
                            <i class="nav-icon icon-globe"></i> Supported by EOSIO
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
        <main class="main">

            <!-- Breadcrumb-->
            <ol class="breadcrumb">
                <li class="breadcrumb-item">Home</li>
                <li class="breadcrumb-item">
                    <a href="info.html">Bob</a>
                </li>
                <li class="breadcrumb-item active"> My Permissions</li>
            </ol>

            <div class="container-fluid">
                <div class="animated fadeIn">
                    <div class="row">

                        <div class="col-lg-6">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fa fa-align-justify"></i> The chain you're part of</div>
                                <div class="card-body">
                                    <table class="table table-responsive-sm table-striped">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Date granted</th>
                                                <th>Type</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Yiorgos Avraamu</td>
                                                <td>2012/01/01</td>
                                                <td>
                                                    <span class="badge badge-secondary" data-toggle="popover"
                                                        data-trigger="hover" data-content="First Name, Last Name">Basic</span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Avram Tarasios</td>
                                                <td>2012/02/01</td>
                                                <td>
                                                    <span class="badge badge-warning" data-toggle="popover"
                                                        data-trigger="hover" data-content="Email, Phone number">Sensitive</span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Quintin Ed</td>
                                                <td>2012/02/01</td>
                                                <td>
                                                    <span class="badge badge-secondary" data-toggle="popover"
                                                        data-trigger="hover" data-content="First Name, Last Name, Country">Basic</span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Enéas Kwadwo</td>
                                                <td>2012/03/01</td>
                                                <td>
                                                    <span class="badge badge-warning" data-toggle="popover"
                                                        data-trigger="hover" data-content="Gender, Marital Status, Name, Last name">Sensitive</span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Agapetus Tadeáš</td>
                                                <td>2012/01/21</td>
                                                <td>
                                                    <span class="badge badge-warning" data-toggle="popover"
                                                        data-trigger="hover" data-content="Phone number, Address, Gender, Marital Status">Sensitive</span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Agapetus Tadeáš</td>
                                                <td>2012/01/21</td>
                                                <td>
                                                    <span class="badge badge-secondary" data-toggle="popover"
                                                        data-trigger="hover" data-content="First Name, Last Name">Basic</span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Agapetus Tadeáš</td>
                                                <td>2012/01/21</td>
                                                <td>
                                                    <span class="badge badge-warning" data-toggle="popover"
                                                        data-trigger="hover" data-content="And here's some amazing content. It's very engaging. Right?">Sensitive</span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                </div>
                            </div>
                        </div>
                        <!-- /.col-->
                        <div class="col-lg-6">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fa fa-align-justify"></i> Your chain of trust</div>
                                <div class="card-body">

                                    <table class="table table-responsive-sm table-striped">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Date granted</th>
                                                <th>Type</th>
                                                <th class='ccenter'>Report</th>
                                            </tr>
                                        </thead>
                                        <tbody id="trust-chain-body">
                                            <tr>
                                                <td>Yiorgos Avraamu</td>
                                                <td>2012/01/01</td>
                                                <td>
                                                    <span class="badge badge-secondary" data-toggle="popover"
                                                        data-trigger="hover" data-content="First name, Last name, Country">Basic</span>
                                                </td>
                                                <td class='ccenter'>
                                                    <button class="btn btn-sm btn-danger" onclick="handleRemoval(this)">
                                                        <i class="fa fa-times"></i></button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Avram Tarasios</td>
                                                <td>2012/02/01</td>
                                                <td>
                                                    <span class="badge badge-warning" data-toggle="popover"
                                                        data-trigger="hover" data-content="Phone number, Address">Sensitive</span>
                                                </td>
                                                <td class='ccenter'>
                                                    <button class="btn btn-sm btn-danger" onclick="handleRemoval(this)">
                                                        <i class="fa fa-times"></i></button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Enéas Kwadwo</td>
                                                <td>2012/03/01</td>
                                                <td>
                                                    <span class="badge badge-warning" data-toggle="popover"
                                                        data-trigger="hover" data-content="Phone number, Address, Gender, Marital status">Sensitive</span>
                                                </td>
                                                <td class='ccenter'>
                                                    <button class="btn btn-sm btn-danger" onclick="handleRemoval(this)">
                                                        <i class="fa fa-times"></i></button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Agapetus Tadeáš</td>
                                                <td>2012/01/21</td>
                                                <td>
                                                    <span class="badge badge-warning" data-toggle="popover"
                                                        data-trigger="hover" data-content="Marital status, Number of children">Sensitive</span>
                                                </td>
                                                <td class='ccenter'>
                                                    <button class="btn btn-sm btn-danger" onclick="handleRemoval(this)">
                                                        <i class="fa fa-times"></i></button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                </div>
                            </div>
                        </div>
                        <!-- /.col-->
                        <!-- /.row-->
                    </div>
                </div>
        </main>
    </div>
    <footer class="app-footer" style='color:rgba(0,0,0,0.6);'>
        <div class="ml-auto">
            <!-- <a href="https://coreui.io">CoreUI</a> -->
            <span style='font-size: 8pt;'>Made with <i class="fa fa-heart"></i> at London EOS Hackathon
            </span>
        </div>

    </footer>

    <!-- Modal -->
    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalCenterTitle">You requested data removal.</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    We will notify you as soon as your request status has changed.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- CoreUI and necessary plugins-->
    <!-- <script src="node_modules/jquery/dist/jquery.min.js"></script>
  <script src="node_modules/popper.js/dist/umd/popper.min.js"></script>
  <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
  <script src="node_modules/pace-progress/pace.min.js"></script>
  <script src="node_modules/perfect-scrollbar/dist/perfect-scrollbar.min.js"></script>
  <script src="node_modules/@coreui/coreui/dist/js/coreui.min.js"></script> -->
    <!-- Plugins and scripts required by this view-->
    <!-- <script src="node_modules/chart.js/dist/Chart.min.js"></script>
  <script src="node_modules/@coreui/coreui-plugin-chartjs-custom-tooltips/dist/js/custom-tooltips.min.js"></script>
  <script src="js/main.js"></script> -->
    <script src="../dist/bundle.js"></script>
    <script src="../javascripts/jquery.min.js"></script>
    <script src="../javascripts/popper.min.js"></script>
    <script src="../javascripts/bootstrap.min.js"></script>
    <script>
        var modalToggledOnce = false;

        $.get('/get-accepted-by-dpo')
            .done(data => {
                if (data) {
                    console.log(data);
                    let html = '<td>2012/02/01</td><td><span class="badge badge-warning" data-toggle="popover"data-trigger="hover" data-content="First name, Last name">Sensitive</span></td><td class="ccenter"><button class="btn btn-sm btn-success" onclick="handleAcceptSensitive(this)"><i class="fa fa-check"></i></button></td>'
                    let row = $('<tr>')
                    row.html(html);
                    let name = $('<td>');
                    name.html(data.user);
                    row.prepend(name);

                    $('#trust-chain-body').prepend(row);
                }
            });

        $(function () {
            $('[data-toggle="popover"]').popover();
        })

        function handleAcceptSensitive(item) {
            item.classList.remove("btn-success");
            item.classList.add("btn-danger");
            item.innerHTML = "<i class='fa fa-times'></i>"
        }

        function handleRemoval(item) {
            if (!modalToggledOnce) {
                $('#exampleModalCenter').modal('toggle');
            }
            modalToggledOnce = true;
            item.classList.remove("btn-danger");
            item.classList.add("btn-warning");
            item.innerHTML = "<i class='fa fa-spinner'></i>"
        }
    </script>
</body>

</html>